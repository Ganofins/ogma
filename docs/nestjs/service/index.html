<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<title data-react-helmet="true">NestJS Service | Ogma</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://ogma.jaymcdoniel.dev//docs/nestjs/service"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="NestJS Service | Ogma"><meta data-react-helmet="true" name="description" content="The @ogma/nestjs-module comes with its own decorator to be used with OgmaModule.forFeature(), very similar to @nestjs/typeorm and @nestjs/mongoose. To inject an OgmaService, simply use the @OgmaLogger() decorator and provide the context for the injection. E.g."><meta data-react-helmet="true" property="og:description" content="The @ogma/nestjs-module comes with its own decorator to be used with OgmaModule.forFeature(), very similar to @nestjs/typeorm and @nestjs/mongoose. To inject an OgmaService, simply use the @OgmaLogger() decorator and provide the context for the injection. E.g."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://ogma.jaymcdoniel.dev//docs/nestjs/service"><link data-react-helmet="true" rel="alternate" href="https://ogma.jaymcdoniel.dev//docs/nestjs/service" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://ogma.jaymcdoniel.dev//docs/nestjs/service" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.410e30f7.css">
<link rel="preload" href="/assets/js/runtime~main.52fab0fe.js" as="script">
<link rel="preload" href="/assets/js/main.a3fee63a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_A5PG">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Ogma Logo" class="themedImage_Bny_ themedImage--light_yMsF"><img src="/img/logo.svg" alt="Ogma Logo" class="themedImage_Bny_ themedImage--dark_1FNQ"></div><b class="navbar__title">Ogma</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/jmcdo29/ogma" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2lHm"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_EKWT toggle_2NiH toggleChecked_1dIX toggleDisabled_9dBg"><div class="toggleTrack_3Lgd" role="button" tabindex="-1"><div class="toggleTrackCheck_2SFi"><span class="toggleIcon_2Q-W">ðŸŒœ</span></div><div class="toggleTrackX_3xqt"><span class="toggleIcon_2Q-W">ðŸŒž</span></div><div class="toggleTrackThumb_12JE"></div></div><input type="checkbox" class="toggleScreenReader_2p84" aria-label="Switch between dark and light mode" checked=""></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_DD6P"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_336t" type="button"></button><aside class="docSidebarContainer_1Wai"><div class="sidebar_3jot"><nav class="menu thin-scrollbar menu_3oO-"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/logger">Logger</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">NestJS</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Module</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nestjs/module">NestJS Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/nestjs/service">NestJS Service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nestjs/interceptor">NestJS Interceptor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nestjs/example">Configured Example</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">HTTP</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">GraphQL</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Microservices</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Websockets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nestjs/custom">Custom</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cli">CLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/styler">Styler</a></li></ul></nav></div></aside><main class="docMainContainer_1Gqc"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_QCTk"><div class="docItemContainer_2ykB"><article><div class="tocCollapsible_3yuK theme-doc-toc-mobile tocMobile_2IW5"><button type="button" class="clean-btn tocCollapsibleButton_3Plj">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>@ogma/nestjs-module Service</h1></header><p>The <code>@ogma/nestjs-module</code> comes with its own decorator to be used with <code>OgmaModule.forFeature()</code>, very similar to <code>@nestjs/typeorm</code> and <code>@nestjs/mongoose</code>. To inject an <code>OgmaService</code>, simply use the <code>@OgmaLogger()</code> decorator and provide the context for the injection. E.g.</p><div class="codeBlockContainer_3b5R"><div class="codeBlockContent_XKHL ts"><pre tabindex="0" class="prism-code language-ts codeBlock_3OY6 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_2Cne"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:rgb(130, 170, 255)">Module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  imports</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token maybe-class-name">OgmaModule</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">forFeature</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">FooService</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  providers</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token maybe-class-name">FooService</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">FooModule</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_XsiO clean-btn">Copy</button></div></div><div class="codeBlockContainer_3b5R"><div class="codeBlockContent_XKHL ts"><pre tabindex="0" class="prism-code language-ts codeBlock_3OY6 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_2Cne"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:rgb(130, 170, 255)">Injectable</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">FooService</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">constructor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @</span><span class="token function maybe-class-name" style="color:rgb(130, 170, 255)">OgmaLogger</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">FooService</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">private</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">readonly</span><span class="token plain"> logger</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">OgmaService</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_XsiO clean-btn">Copy</button></div></div><p>And as <code>OgmaService</code> implements Nest&#x27;s <code>LoggerService</code> you can simply use the <code>LoggerService</code> type instead in case you want to easily be able to swap out loggers in the future.</p><h2 class="anchor anchorWithStickyNavbar_3pbl" id="request-scoped-logger">Request Scoped Logger<a aria-hidden="true" class="hash-link" href="#request-scoped-logger" title="Direct link to heading">â€‹</a></h2><p>If you are using a request scoped logger, denoted by adding <code>{ addRequestId: true }</code> in the <code>OgmaModule.forFeature()</code>, then you&#x27;ll need to use <code>@OgmaLoggerRequestScoped()</code> instead of <code>@OgmaLogger()</code>. This is to keep the injection tokens easily separated under the hood.</p><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p><strong><em><a href="https://docs.nestjs.com/fundamentals/injection-scopes#injection-scopes" target="_blank" rel="noopener noreferrer">Please make sure you understand the implications of using a request scoped service!</a></em></strong></p></div></div><h2 class="anchor anchorWithStickyNavbar_3pbl" id="methods">Methods<a aria-hidden="true" class="hash-link" href="#methods" title="Direct link to heading">â€‹</a></h2><p>For the most part, all of the methods for the <code>OgmaService</code> are the same as using <code>Ogma</code> directly, with the exception of being able to pass <code>application</code> to the optional <code>meta</code> parameter.</p><h3 class="anchor anchorWithStickyNavbar_3pbl" id="meta">Meta<a aria-hidden="true" class="hash-link" href="#meta" title="Direct link to heading">â€‹</a></h3><p>The <code>meta</code> parameter for all of the logging methods (<code>info</code>, <code>verbose</code>, <code>debug</code>, <code>warn</code>, <code>fatal</code>, <code>silly</code>, and <code>error</code>) is an optional parameter where you can pass either a string for a separate context in the log, or an object with additional data defined in any way you would please. This is great for use with log aggregators like <a href="https://www.datadoghq.com/" target="_blank" rel="noopener noreferrer">DataDog</a> or <a href="https://www.logdna.com/" target="_blank" rel="noopener noreferrer">LogDNA</a>.</p><h3 class="anchor anchorWithStickyNavbar_3pbl" id="printing-multiple-values">Printing Multiple Values<a aria-hidden="true" class="hash-link" href="#printing-multiple-values" title="Direct link to heading">â€‹</a></h3><p>To get <code>ogma</code> to automatically print multiple values for you, rather than having to call <code>ogma.log</code> on each value, you can pass an array of value and the <code>{ each: true }</code> option to <code>ogma</code>. This will cause <code>ogma</code> to print each value of the array as if you had called <code>ogma.log</code> on each one.</p><p>::: info</p><p>Ogma ill <strong>not</strong> recursively print arrays of arrays. <code>[ [&#x27;Hello&#x27;, &#x27;World&#x27;], [&#x27;Foo&#x27;, &#x27;Bar&#x27;, &#x27;Baz&#x27;]</code> will print two arrays across two lines, not five strings across five lines.</p><p>:::</p><p>::: info</p><p>This option is available in <code>@ogma/nestjs-module@^4.1.0</code></p><p>:::</p><h3 class="anchor anchorWithStickyNavbar_3pbl" id="error">error<a aria-hidden="true" class="hash-link" href="#error" title="Direct link to heading">â€‹</a></h3><p>You&#x27;ll also notice that <code>error</code> has a slightly different signature than the other logging methods. This is due to keeping in line with Nest&#x27;s <code>LoggerService</code> interface. You can decide to pass a <code>trace</code> as a second parameter and a <code>meta</code> object as the third, or just pass the <code>meta</code> object as the second parameter and Ogma will pass the information on as necessary to the appropriate methods.</p><h2 class="anchor anchorWithStickyNavbar_3pbl" id="testing">Testing<a aria-hidden="true" class="hash-link" href="#testing" title="Direct link to heading">â€‹</a></h2><p>If you end up using the <code>@OgmaLogger()</code> decorators and dependency injection, then you&#x27;ll undoubtedly run into the need to mock out the logger during tests. For this, <code>@ogma/nestjs-module</code> provides the two token creation methods for you, so all you need to do is provide a mock custom provider like so:</p><div class="codeBlockContainer_3b5R"><div class="codeBlockContent_XKHL ts"><pre tabindex="0" class="prism-code language-ts codeBlock_3OY6 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_2Cne"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> modRef </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> </span><span class="token maybe-class-name">Test</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">createTestingModule</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  providers</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token maybe-class-name">FooService</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      provide</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">createProviderToken</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">FooService</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      useValue</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        log</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> jest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">fn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// other logger methods that are used</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">compile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_XsiO clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_3pbl" id="replacing-nests-logger">Replacing Nest&#x27;s Logger<a aria-hidden="true" class="hash-link" href="#replacing-nests-logger" title="Direct link to heading">â€‹</a></h2><p>As Nest provides developers the ability to call <code>app.useLogger()</code> it&#x27;s only fair to show how to get the root <code>OgmaService</code> instance out of the Nest container so it can be set for the entire application. Just like any other DI component, you can use <code>app.get()</code> to get the root service and pass it to Nest for general use</p><div class="codeBlockContainer_3b5R"><div class="codeBlockContent_XKHL ts"><pre tabindex="0" class="prism-code language-ts codeBlock_3OY6 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_2Cne"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">bootstrap</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> app </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> </span><span class="token maybe-class-name">NestFactory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">create</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">AppModule</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    bufferLogs</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> ogma </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword" style="font-style:italic">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">OgmaService</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> strict</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">useLogger</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ogma</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">listen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">3000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_XsiO clean-btn">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p><code>{ bufferLogs: true }</code> was added in Nest v8. For before v8, you can either pass <code>{logger: false}</code> or no options object</p></div></div><h2 class="anchor anchorWithStickyNavbar_3pbl" id="log-and-logall-decorators">Log and LogAll Decorators<a aria-hidden="true" class="hash-link" href="#log-and-logall-decorators" title="Direct link to heading">â€‹</a></h2><p>As of 3.2.0, <code>@ogma/nestjs-module</code> has two new decorators on the scene: <code>@Log()</code> and <code>@LogAll()</code>. This decorator will automatically add a method start and method end log to your class methods and add how long the method took to the end message. There is one limitation that should bne kept in mind: these decorators <strong>do not</strong> work on controller methods, because of how Nest creates the route handlers via a proxy. This should not be too big of a deal however, because the interceptor essentially acts to add the same data, just without the &quot;start&quot; log.</p><p>By default, the added code will assume you have a <code>logger</code> property as a part of the class, however, if you&#x27;d like to use a different property you can pass it to the <code>@Log()</code> decorator.</p><p>As it can get tedious to add the decorator to every method, there&#x27;s also the <code>@LogAll()</code> decorator which will find your class&#x27;s methods and apply the <code>@Log()</code> decorator for you. You can customize the logger property the same way with this decorator too.</p><p>Lastly, the added code by default will log at the <code>fine</code> level as this will end up adding a lot of data to your logs and can be considered noisy, but is also useful for tracing down time sinks. If you want to log at a higher level, you can pass a different level to the <code>traceMethod</code> option in your <code>OgmaModule.forRoot()</code> configuration.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/jmcdo29/ogma/edit/main/apps/docs/docs/nestjs/service.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Ohjr" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_9qUR"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-10-13T18:27:00.000Z">10/13/2022</time></b> by <b>Jay McDoniel</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/nestjs/module"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->NestJS Module</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/nestjs/interceptor"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">NestJS Interceptor<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_1xqK thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#request-scoped-logger" class="table-of-contents__link toc-highlight">Request Scoped Logger</a></li><li><a href="#methods" class="table-of-contents__link toc-highlight">Methods</a><ul><li><a href="#meta" class="table-of-contents__link toc-highlight">Meta</a></li><li><a href="#printing-multiple-values" class="table-of-contents__link toc-highlight">Printing Multiple Values</a></li><li><a href="#error" class="table-of-contents__link toc-highlight">error</a></li></ul></li><li><a href="#testing" class="table-of-contents__link toc-highlight">Testing</a></li><li><a href="#replacing-nests-logger" class="table-of-contents__link toc-highlight">Replacing Nest&#39;s Logger</a></li><li><a href="#log-and-logall-decorators" class="table-of-contents__link toc-highlight">Log and LogAll Decorators</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/ogma" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2lHm"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discord.gg/7cJqcFncAX" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2lHm"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/jmcdo29" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2lHm"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Jay McDoniel. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.52fab0fe.js"></script>
<script src="/assets/js/main.a3fee63a.js"></script>
</body>
</html>